<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>AquaMetro</title>

<script src="https://cdn.tailwindcss.com"></script>
<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">

<style>
    body { font-family: 'Inter', sans-serif; background-color: #f0f4f8; }

    /* Hero Section */
    .hero-section {
        background-image: linear-gradient(rgba(150, 51, 51, 0.6), rgba(0,0,0,0.6)), url('image/figure.png');
          <img src="image/figure.png"alt="figure">
        background-size: cover;
        background-position: center;
        min-height: 80vh;
        display: flex;
        align-items: center;
        justify-content: center;
    }
    @keyframes slideFadeIn {
        0% { opacity: 0; transform: translateY(20px); }
        100% { opacity: 1; transform: translateY(0); }
    }
    .animate-slide-fade { animation: slideFadeIn 1s ease-out forwards; }

    /* Loader */
    .loader { border-top-color: #3498db; animation: spin 1s linear infinite; }
    @keyframes spin { to { transform: rotate(360deg); } }

    /* Modal Animations */
    .modal-backdrop { transition: opacity 0.3s ease-in-out; opacity: 0; pointer-events: none; }
    .modal-backdrop.show { opacity: 1; pointer-events: auto; }
    .modal-content { transform: translateY(20px); transition: transform 0.3s ease-out, opacity 0.3s ease-out; opacity: 0; }
    .modal-backdrop.show .modal-content { transform: translateY(0); opacity: 1; }

    /* Search Results Animation */
    .result-card { transition: transform 0.3s ease, box-shadow 0.3s ease; }
    .result-card:hover { transform: scale(1.05); box-shadow: 0 10px 25px rgba(0,0,0,0.15); }

    /* News Item Animation */
    @keyframes fadeInUp {
        0% { opacity: 0; transform: translateY(10px); }
        100% { opacity: 1; transform: translateY(0); }
    }
    .news-item { animation: fadeInUp 0.5s ease forwards; }

    /* Terminal Hover */
    .terminal-item { transition: transform 0.3s ease; cursor: pointer; }
    .terminal-item:hover { transform: translateX(5px); background-color: #E0F7FA; }
</style>
</head>
<body class="antialiased text-gray-800">

<!-- Header -->
<header class="bg-white shadow-md sticky top-0 z-50">
    <nav class="container mx-auto px-4 sm:px-6 lg:px-8">
        <div class="flex items-center justify-between h-16">
            <div class="flex items-center space-x-4">
                <span class="text-xl font-bold text-gray-800">AquaMetro</span>
            </div>
            <div class="hidden md:block">
                <div class="ml-10 flex items-baseline space-x-4">
                    <a href="#booking-section" class="text-blue-600 font-semibold px-3 py-2">Book Tickets</a>
                    <a href="#terminals-section" class="text-cyan-600 font-semibold px-3 py-2">Terminals</a>
                    <a href="#news-section" class="text-gray-500 hover:text-cyan-600 px-3 py-2">News</a>
                </div>
            </div>
        </div>
    </nav>
</header>

<!-- Hero Section -->
<section class="hero-section text-white">
    <div class="container mx-auto px-4 sm:px-6 lg:px-8 py-20 text-center">
        <h1 class="text-4xl md:text-5xl font-bold mb-4 animate-slide-fade">Welcome to AquaMetro</h1>
    </div>
</section>

<!-- Booking Form Section -->
<section id="booking-section" class="container mx-auto px-4 sm:px-6 lg:px-8 -mt-16">
    <div class="bg-white rounded-lg shadow-xl p-6 md:p-8">
        <form id="booking-form" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-5 gap-4 items-end">
            <div>
                <label for="from-station" class="block text-sm font-medium text-gray-700">From</label>
                <select id="from-station" required class="mt-1 block w-full border-gray-300 rounded-md">
                    <option value="">Select Station</option>
                </select>
            </div>
            <div>
                <label for="to-station" class="block text-sm font-medium text-gray-700">To</label>
                <select id="to-station" required class="mt-1 block w-full border-gray-300 rounded-md">
                    <option value="">Select Station</option>
                </select>
            </div>
            <div>
                <label for="journey-date" class="block text-sm font-medium text-gray-700">Date</label>
                <input type="date" id="journey-date" required class="mt-1 block w-full border-gray-300 rounded-md">
            </div>
            <div>
                <label for="passengers" class="block text-sm font-medium text-gray-700">Passengers</label>
                <input type="number" id="passengers" value="1" min="1" max="10" required class="mt-1 block w-full border-gray-300 rounded-md">
            </div>
            <div>
                <button type="submit" class="w-full bg-blue-600 text-white font-semibold py-2 px-4 rounded-md hover:bg-blue-700 transform transition-transform hover:scale-105">
                    Find Journey
                </button>
            </div>
        </form>
        <div id="form-error" class="text-red-500 text-sm mt-2 hidden"></div>
    </div>
</section>

<!-- Booking Results -->
<section id="search-results-section" class="container mx-auto px-4 sm:px-6 lg:px-8 py-12">
    <h2 id="results-title" class="text-2xl font-bold text-gray-800 mb-6 hidden">Available Journeys</h2>
    <div id="results-loader" class="text-center hidden">
        <div class="loader ease-linear rounded-full border-8 border-t-8 border-gray-200 h-24 w-24 mx-auto"></div>
        <p class="mt-4 text-gray-600">Finding the best routes for you...</p>
    </div>
    <div id="results-container" class="space-y-4"></div>
    <div id="no-results" class="text-center py-10 bg-white rounded-lg shadow-md hidden">
        <p class="text-gray-600">No journeys found. Please try again.</p>
    </div>
</section>

<!-- Payment Modal -->
<div id="payment-modal" class="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50 modal-backdrop">
    <div class="bg-white rounded-lg shadow-xl w-full max-w-md p-6 modal-content">
        <div class="flex justify-between items-center border-b pb-3">
            <h3 class="text-xl font-semibold">Confirm & Pay</h3>
            <button id="close-payment-modal" class="text-gray-400 hover:text-gray-600">&times;</button>
        </div>
        <div class="mt-4">
            <div id="payment-summary" class="space-y-2 text-sm"></div>
            <div class="mt-6">
                <p class="font-semibold mb-2">Select Payment Method</p>
                <div class="flex space-x-4">
                    <button class="flex-1 p-3 border rounded-lg hover:bg-gray-100 transform transition-transform hover:scale-105">Card</button>
                    <button class="flex-1 p-3 border rounded-lg hover:bg-gray-100 transform transition-transform hover:scale-105">UPI</button>
                    <button class="flex-1 p-3 border rounded-lg hover:bg-gray-100 transform transition-transform hover:scale-105">Net Banking</button>
                </div>
            </div>
            <div class="mt-6">
                <button id="confirm-payment-btn" class="w-full bg-green-500 text-white font-bold py-3 px-4 rounded-md hover:bg-green-600 transform transition-transform hover:scale-105">
                    Pay Now
                </button>
            </div>
        </div>
    </div>
</div>

<!-- Confirmation Modal with QR -->
<div id="confirmation-modal" class="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50 modal-backdrop">
    <div class="bg-white rounded-lg shadow-xl w-full max-w-md p-6 text-center modal-content">
        <div class="mx-auto flex items-center justify-center h-12 w-12 rounded-full bg-green-100">
            <svg class="h-6 w-6 text-green-600" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7" />
            </svg>
        </div>
        <h3 class="text-lg font-medium text-gray-900 mt-3">Booking Confirmed!</h3>
        <div class="mt-4 text-sm text-gray-600">
            <p>Your e-ticket has been generated.</p>
            <div id="qr-code-container" class="mt-4">
                <img id="qr-code" src="" alt="QR Code" class="mx-auto">
            </div>
            <p class="mt-2">Show this QR at the entry gate.</p>
        </div>
        <div class="mt-5">
            <button id="close-confirmation-modal" class="w-full rounded-md bg-blue-600 text-white py-2 hover:bg-blue-700 transform transition-transform hover:scale-105">Done</button>
        </div>
    </div>
</div>

<!-- Terminals & News Section -->
<main class="container mx-auto px-4 sm:px-6 lg:px-8 py-12" id="terminals-section">
    <div class="grid grid-cols-1 lg:grid-cols-3 gap-8">

        <!-- Terminals List -->
        <section class="lg:col-span-2 bg-white rounded-lg shadow-xl p-6">
            <h1 class="text-3xl font-bold text-gray-800 mb-6">Terminals</h1>
            <div id="terminals-loader" class="text-center py-10">
                <div class="loader ease-linear rounded-full border-4 border-t-4 border-gray-200 h-12 w-12 mx-auto"></div>
                <p class="mt-4 text-gray-600">Loading terminal information...</p>
            </div>
            <div id="terminals-container" class="space-y-2"></div>
            <div id="terminals-error" class="text-red-500 text-center py-10 hidden">
                <p>Failed to load terminal data or no data found.</p>
            </div>
        </section>

        <!-- News & Terminal Details Sidebar -->
        <aside class="lg:col-span-1 space-y-8">
            <div class="bg-white p-4 rounded-lg shadow-xl" id="news-section">
                <h2 class="text-xl font-semibold text-gray-800 border-b pb-2 mb-3">Latest News</h2>
                <div id="news-loader" class="text-center py-4">
                    <div class="loader ease-linear rounded-full border-2 border-t-2 border-gray-200 h-8 w-8 mx-auto"></div>
                </div>
                <div id="news-container" class="space-y-2 text-sm"></div>
                <div id="news-error" class="text-red-500 text-center text-xs pt-4 hidden">
                    <p>No recent news available.</p>
                </div>
            </div>

            <!-- Terminal Details with Map -->
            <div class="bg-white p-4 rounded-lg shadow-xl">
                <h2 class="text-xl font-semibold text-gray-800 border-b pb-2 mb-3">Terminal Details</h2>
                <div id="terminal-detail" class="text-sm text-gray-600 space-y-3">
                    <p class="text-center text-gray-500">Click on a terminal to view details here.</p>
                    <div id="map-placeholder" class="bg-gray-200 h-48 rounded-md flex items-center justify-center text-gray-500"></div>
                </div>
            </div>
        </aside>
    </div>
</main>

<!-- Footer -->
<footer class="bg-gray-800 text-white mt-12">
    <div class="container mx-auto px-4 sm:px-6 lg:px-8 py-8 text-center text-sm">
        <p>&copy; 2025 AquaMetro. All Rights Reserved.</p>
    </div>
</footer>

<!-- JS -->
<script>
document.addEventListener('DOMContentLoaded', () => {
    const stations = ["Central Park","City Hall","Downtown","East Liberty","Financial District",
                      "Green Square","Harbor View","Industrial Zone","Junction Point",
                      "King's Cross","Liberty Heights","Metro Center","Northgate","Oakwood",
                      "Plaza","Queen's Street","Riverfront","South Bank","Tech Hub",
                      "University","Victory Monument","West End","Xavier's College",
                      "Yankee Stadium","Zion National Park"];

    const fromStationSelect = document.getElementById('from-station');
    const toStationSelect = document.getElementById('to-station');
    const journeyDateInput = document.getElementById('journey-date');
    const bookingForm = document.getElementById('booking-form');
    const formError = document.getElementById('form-error');

    const resultsTitle = document.getElementById('results-title');
    const resultsContainer = document.getElementById('results-container');
    const resultsLoader = document.getElementById('results-loader');
    const noResults = document.getElementById('no-results');

    const paymentModal = document.getElementById('payment-modal');
    const closePaymentModalBtn = document.getElementById('close-payment-modal');
    const confirmPaymentBtn = document.getElementById('confirm-payment-btn');
    const paymentSummary = document.getElementById('payment-summary');

    const confirmationModal = document.getElementById('confirmation-modal');
    const closeConfirmationModalBtn = document.getElementById('close-confirmation-modal');
    const qrCodeImg = document.getElementById('qr-code');

    stations.forEach(st => {
        fromStationSelect.add(new Option(st, st));
        toStationSelect.add(new Option(st, st));
    });

    const today = new Date().toISOString().split('T')[0];
    journeyDateInput.value = today;
    journeyDateInput.min = today;

    bookingForm.addEventListener('submit', e => {
        e.preventDefault();
        const from = fromStationSelect.value;
        const to = toStationSelect.value;
        if(!from || !to) return showError('Select both stations.');
        if(from === to) return showError('From & To cannot be same.');
        hideError();
        findJourneys();
    });

    function showError(msg){ formError.textContent=msg; formError.classList.remove('hidden'); }
    function hideError(){ formError.classList.add('hidden'); }

    function findJourneys(){
        resultsTitle.classList.remove('hidden');
        resultsLoader.classList.remove('hidden');
        resultsContainer.innerHTML = ''; noResults.classList.add('hidden');
        setTimeout(()=>{
            resultsLoader.classList.add('hidden');
            const from = fromStationSelect.value, to = toStationSelect.value, passengers = +document.getElementById('passengers').value;
            const journeys = generateMockJourneys(from,to,passengers);
            displayResults(journeys);
        },1500);
    }

    function generateMockJourneys(from,to,passengers){
        const results=[], baseFare=Math.floor(Math.random()*30)+20;
        for(let i=0;i<3;i++){
            const dep=8+i*2, arr=dep+1, dur=Math.floor(Math.random()*20)+45;
            results.push({ from,to, passengers,
                departureTime:`${String(dep).padStart(2,'0')}:${String(i*15).padStart(2,'0')}`,
                arrivalTime:`${String(arr).padStart(2,'0')}:${String(i*10).padStart(2,'0')}`,
                duration:`${dur} mins`,
                totalFare:(baseFare+i*5)*passengers,
                trainType:i%2===0?"Express":"Regular"
            });
        }
        return results;
    }

    function displayResults(journeys){
        if(journeys.length===0){ noResults.classList.remove('hidden'); return; }
        journeys.forEach(j=>{
            const div = document.createElement('div');
            div.className='bg-white rounded-lg shadow-md p-5 flex flex-col sm:flex-row items-center justify-between result-card';
            div.innerHTML=`
                <div>
                    <div class="flex items-center space-x-4">
                        <span class="font-bold text-lg text-blue-600">${j.departureTime}</span>
                        <span class="text-gray-500">&#8594;</span>
                        <span class="font-bold text-lg text-blue-600">${j.arrivalTime}</span>
                        <span class="text-gray-500 ml-4">${j.duration}</span>
                        <span class="ml-4 px-2 py-1 text-xs font-semibold ${j.trainType==='Express'?'bg-green-100 text-green-800':'bg-yellow-100 text-yellow-800'} rounded-full">${j.trainType}</span>
                    </div>
                    <p class="text-sm text-gray-600 mt-1">${j.from} to ${j.to}</p>
                </div>
                <div class="mt-4 sm:mt-0 sm:ml-6 text-center sm:text-right">
                    <p class="text-xl font-bold">₹${j.totalFare.toFixed(2)}</p>
                    <p class="text-xs text-gray-500">${j.passengers} Passenger(s)</p>
                    <button class="book-now-btn mt-2 w-full sm:w-auto bg-blue-600 text-white py-2 px-6 rounded-md hover:bg-blue-700 transform transition-transform hover:scale-105" data-journey='${JSON.stringify(j)}'>Book Now</button>
                </div>`;
            resultsContainer.appendChild(div);
        });
    }

    resultsContainer.addEventListener('click', e=>{
        if(e.target.classList.contains('book-now-btn')){
            const j = JSON.parse(e.target.dataset.journey);
            paymentSummary.innerHTML=`
                <p><strong>From:</strong> ${j.from}</p>
                <p><strong>To:</strong> ${j.to}</p>
                <p><strong>Passengers:</strong> ${j.passengers}</p>
                <p><strong>Total Fare:</strong> ₹${j.totalFare.toFixed(2)}</p>`;
            qrCodeImg.src=`https://api.qrserver.com/v1/create-qr-code/?size=150x150&data=${encodeURIComponent(JSON.stringify(j))}`;
            showModal(paymentModal);
        }
    });

    closePaymentModalBtn.addEventListener('click', ()=>hideModal(paymentModal));
    confirmPaymentBtn.addEventListener('click', ()=>{
        hideModal(paymentModal);
        showModal(confirmationModal);
    });
    closeConfirmationModalBtn.addEventListener('click', ()=>hideModal(confirmationModal));

    function showModal(m){ m.classList.add('show'); }
    function hideModal(m){ m.classList.remove('show'); }

    // Terminals & News
    const TERMINAL_URL='https://raw.githubusercontent.com/e3ob/wm-test/refs/heads/main/terminal.json';
    const NEWS_URL='https://raw.githubusercontent.com/e3ob/wm-test/refs/heads/main/news.json';
    const terminalsContainer=document.getElementById('terminals-container');
    const terminalsLoader=document.getElementById('terminals-loader');
    const terminalsError=document.getElementById('terminals-error');
    const terminalDetail=document.getElementById('terminal-detail');
    const mapPlaceholder=document.getElementById('map-placeholder');
    const newsContainer=document.getElementById('news-container');
    const newsLoader=document.getElementById('news-loader');
    const newsError=document.getElementById('news-error');

    async function fetchJSON(url){ try{ const r=await fetch(url); if(!r.ok) throw new Error('HTTP '+r.status); const d=await r.json(); return d.data||[]; }catch(e){ console.error(e); return null; } }

    async function loadTerminals(){
        const data=await fetchJSON(TERMINAL_URL);
        terminalsLoader.classList.add('hidden');
        if(data && data.length>0){
            terminalsContainer.innerHTML='';
            data.forEach(t=>{
                const div=document.createElement('div');
                div.className='flex items-center p-3 border-b terminal-item';
                div.dataset.lat=t.latitude;
                div.dataset.lng=t.longitude;
                div.dataset.name=t.name;
                div.dataset.desc=t.description;
                div.dataset.map=t.mapLocation;
                div.textContent=t.name;
                terminalsContainer.appendChild(div);
            });
            showTerminalDetails(data[0]);
        } else terminalsError.classList.remove('hidden');
    }

    function showTerminalDetails(t){
        terminalDetail.innerHTML=`
            <h3 class="text-lg font-bold text-cyan-700 mb-2">${t.name}</h3>
            <p class="text-sm text-gray-600">${t.description}</p>`;
        mapPlaceholder.innerHTML=`<iframe width="100%" height="100%" style="border:0;" loading="lazy" allowfullscreen
            src="https://www.google.com/maps/embed/v1/place?key=YOUR_GOOGLE_MAPS_API_KEY&q=${encodeURIComponent(t.name)}"></iframe>`;
    }

    terminalsContainer.addEventListener('click', e=>{
        const t=e.target;
        if(t.dataset.name) showTerminalDetails(t.dataset);
    });

    async function loadNews(){
        const data=await fetchJSON(NEWS_URL);
        newsLoader.classList.add('hidden');
        if(data && data.length>0){
            newsContainer.innerHTML='';
            data.slice(0,5).forEach(n=>{
                const div=document.createElement('div');
                div.className='p-2 border-b last:border-b-0 news-item';
                div.innerHTML=`<h4 class="font-medium text-gray-900">${n.title}</h4><p class="text-xs text-gray-500 mt-0.5">${n.shortDescription.substring(0,50)}...</p>`;
                newsContainer.appendChild(div);
            });
        } else newsError.classList.remove('hidden');
    }

    loadTerminals();
    loadNews();
});
</script>
</body>
</html>
